{
    "openapi": "3.0.0",
    "info": {
        "title": "API Kapo App ",
        "description": "Tất cả API của Kapo tại đây",
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0."
    },
    "servers": [
        {
            "url": "http://127.0.0.1:8000",
            "description": "Demo API Server"
        }
    ],
    "paths": {
        "/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Đăng nhập tài khoản",
                "description": "Đăng nhập tài khoản",
                "operationId": "deb66deaa11d97fc919b9b5cab5dddf4",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "email": {
                                        "description": "User's email address",
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "code": {
                                        "description": "OTP code",
                                        "type": "string"
                                    }
                                },
                                "type": "object",
                                "example": {
                                    "email": "haitiger.al9@gmail.com",
                                    "password": "112233"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "400": {
                        "description": "Tài khoản đã bị block",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>3</code></response>"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Tài khoản chưa xác thực email",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>4</code></response>"
                                }
                            }
                        }
                    },
                    "402": {
                        "description": "Tài khoản hoặc mật khẩu không chính xác",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>2</code></response>"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Tài khoản và mật khẩu chính xác",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>0</code></response>"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/check-mail": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Kiểm tra xem email đã được đăng ký tài khoản chưa",
                "description": "Kiểm tra Email",
                "operationId": "fd0141c9be373a645359f5c462381c6c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "email": {
                                        "description": "User's email address",
                                        "type": "string",
                                        "format": "email"
                                    }
                                },
                                "type": "object",
                                "example": {
                                    "email": "haitiger.al9@gmail.com"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Email chưa đăng ký",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response>\n    <data></data>\n    <code>0</code>\n</response>"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Email đã đăng ký",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response>\n    <data></data>\n    <code>2</code>\n</response>"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/register": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Register a new user or resend OTP",
                "description": "Registers a new user if the email is not already taken, or resends OTP if the user exists but is not verified.",
                "operationId": "ca3cc05b3ce7bd0dd56cb1d821ba683c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "email": {
                                        "description": "User's email address",
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "name": {
                                        "description": "User's name",
                                        "type": "string"
                                    },
                                    "password": {
                                        "description": "User's password",
                                        "type": "string",
                                        "format": "password"
                                    },
                                    "password_confirmation": {
                                        "description": "Confirmation of user's password",
                                        "type": "string",
                                        "format": "password"
                                    }
                                },
                                "type": "object",
                                "example": {
                                    "email": "haitiger.al9@gmail.com",
                                    "name": "admin",
                                    "password": "password",
                                    "password_confirmation": "password"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response>\n  <data></data>\n  <code>0</code>\n</response>"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "User đã tồn tại",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response>\n  <data></data>\n  <code>2</code>\n</response>"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Vẫn còn thời gian chờ OTP, chuyển qua màn hình chờ OTP",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response>\n  <data></data>\n  <code>3</code>\n</response>"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/email/verify": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Xác minh mã OTP đúng không",
                "description": "Xác minh mã OTP",
                "operationId": "c9fb58cb8e9885c1b1ec2e5f10903554",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "email": {
                                        "description": "User's email address",
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "code": {
                                        "description": "OTP code",
                                        "type": "string"
                                    }
                                },
                                "type": "object",
                                "example": {
                                    "email": "haitiger.al9@gmail.com",
                                    "code": "112233"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "400": {
                        "description": "Email không tồn tại OTP",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>2</code></response>"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "OTP đã hết hạn",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>3</code></response>"
                                }
                            }
                        }
                    },
                    "402": {
                        "description": "OTP không chính xác",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>4</code></response>"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "OTP chính xác",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>0</code></response>"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/email/resend-verification": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Yêu cầu gửi lại OTP",
                "description": "Gởi lại OTP",
                "operationId": "af994790c4e2f99ab4b1c5e7d021a031",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "email": {
                                        "description": "User's email address",
                                        "type": "string",
                                        "format": "email"
                                    }
                                },
                                "type": "object",
                                "example": {
                                    "email": "haitiger.al9@gmail.com"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "400": {
                        "description": "OTP đã submit hoặc không tồn tại",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>2</code></response>"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Đã gửi lại OTP về email",
                        "content": {
                            "application/string": {
                                "schema": {
                                    "type": "string",
                                    "example": "<response><data></data><code>0</code></response>"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/couple": {
            "get": {
                "tags": [
                    "Couple"
                ],
                "summary": "Lấy thông tin hiện tại của couple hiện tại",
                "description": "Lấy thông tin couple của user hiện tại",
                "operationId": "7be46900703d74ebcd3939cbd33f27b6",
                "responses": {
                    "400": {
                        "description": "Bạn đang độc thân",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 2}"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Lấy thông tin thành công",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 0}"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/couple/invite": {
            "post": {
                "tags": [
                    "Couple"
                ],
                "summary": "Gửi lời mời ghép đôi",
                "description": "Gửi lời mời ghép đôi",
                "operationId": "507d2c7d2fdc49e3be3d6373505ad83f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "invited_email": {
                                        "description": "Địa chỉ email người nhận lời mời",
                                        "type": "string",
                                        "format": "email"
                                    }
                                },
                                "type": "object",
                                "example": {
                                    "invited_email": "haitiger.al@gmail.com"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "400": {
                        "description": "Bạn đã ghép đôi với người khác",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 2}"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Đã gửi lời mời trước đó, đang chờ",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 3}"
                                }
                            }
                        }
                    },
                    "402": {
                        "description": "Người nhận đã có người yêu, thử lại sau",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 5}"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Gửi yêu cầu thành công",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 0}"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/couple/update-invite": {
            "post": {
                "tags": [
                    "Couple"
                ],
                "summary": "Cập nhật trạng thái lời mời",
                "description": "Cập nhật trạng thái lời mời",
                "operationId": "5f0f8e11229d4eb6a463b62f2824c9f2",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "invitation_id": {
                                        "description": "ID Lời mời",
                                        "type": "string"
                                    },
                                    "status": {
                                        "description": "trạng thái lời mời (1: chấp nhận, 2: từ chối, 3: hủy lời mời)",
                                        "type": "string"
                                    }
                                },
                                "type": "object",
                                "example": {
                                    "invitation_id": "1",
                                    "status": "1"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "400": {
                        "description": "Không tìm thấy lời mời",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 2}"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Lời mời không phải của bạn => Bạn không thể từ chối",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 3}"
                                }
                            }
                        }
                    },
                    "402": {
                        "description": "Bạn không phải người gửi lời mời  => không thể hủy lời mời",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 4}"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Lời mời không phải của bạn   => không thể chấp nhận",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 5}"
                                }
                            }
                        }
                    },
                    "405": {
                        "description": "Lỗi không xác định",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 6}"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Cập nhật trạng thái thành công",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "{'data': [], 'code': 0}"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "sanctum": {
                "type": "http",
                "description": "Enter token in format (Bearer )",
                "name": "Authorization",
                "in": "header",
                "scheme": "bearer"
            }
        }
    }
}